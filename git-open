#! /bin/sh -
# Simple bash script to open the current github repo you are in
# in your default browser. Ensure this file is in your $PATH
#
# usage: git open
cmd='git config --get remote.origin.url'
url=$($cmd)

# If a local repo try get the origin url from there
if grep -E '^/' > /dev/null <<< $url; then
  url=$(cd "${url}"; $cmd)
fi

# change 'git@github.com:user/repo' to url format
if grep -Evi '^http' > /dev/null <<< $url; then
  url=$(sed -e 's_:_/_' -e 's_^git@_https://_')
fi

if [ ! -z "$url" ]; then
  case $(uname) in
    'Linux' )
      xdg-open "$url"
      ;;
    'Darwin' )
      open "$url"
      ;;
  esac
else
  echo "Trouble finding remote URL"
  exit 1
fi
